<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Edu2Job - Login/Register</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500">
  <div class="backdrop-blur-lg bg-white/20 shadow-2xl rounded-2xl w-full max-w-md p-8">
    <h1 class="text-3xl font-extrabold text-center text-white drop-shadow mb-6">ðŸš€ Edu2Job</h1>

    <!-- Tabs -->
    <div class="flex mb-6 bg-white/30 rounded-xl overflow-hidden">
      <button id="tabRegister" class="flex-1 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold">Register</button>
      <button id="tabLogin" class="flex-1 py-3 text-gray-800 font-semibold bg-white/40">Login</button>
    </div>

    <!-- Register Form -->
    <form id="registerForm" class="space-y-4">
      <input type="text" id="regName" placeholder="Full Name" class="w-full px-4 py-3 rounded-lg bg-white/70"/>
      <input type="email" id="regEmail" placeholder="Email" class="w-full px-4 py-3 rounded-lg bg-white/70"/>
      <input type="password" id="regPassword" placeholder="Password" class="w-full px-4 py-3 rounded-lg bg-white/70"/>
      <button type="submit" class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold py-3 rounded-lg hover:opacity-90">Register</button>
    </form>

    <!-- Login Form -->
    <form id="loginForm" class="space-y-4 hidden">
      <input type="email" id="loginEmail" placeholder="Email" class="w-full px-4 py-3 rounded-lg bg-white/70"/>
      <input type="password" id="loginPassword" placeholder="Password" class="w-full px-4 py-3 rounded-lg bg-white/70"/>
      <button type="submit" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold py-3 rounded-lg hover:opacity-90">Login</button>
    </form>

    <div id="message" class="mt-4 text-center text-white font-medium"></div>
  </div>

<script>
const tabRegister = document.getElementById("tabRegister");
const tabLogin = document.getElementById("tabLogin");
const registerForm = document.getElementById("registerForm");
const loginForm = document.getElementById("loginForm");
const messageDiv = document.getElementById("message");

tabRegister.onclick = () => {
  registerForm.classList.remove("hidden");
  loginForm.classList.add("hidden");
  messageDiv.textContent = "";
};
tabLogin.onclick = () => {
  loginForm.classList.remove("hidden");
  registerForm.classList.add("hidden");
  messageDiv.textContent = "";
};

// Helper: POST JSON
async function postJson(url, data) {
  const res = await fetch(url, {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(data)
  });
  return {ok: res.ok, data: await res.json()};
}

// Register
registerForm.addEventListener("submit", async e => {
  e.preventDefault();
  messageDiv.textContent = "";
  const {ok,data} = await postJson("/api/register", {
    name: document.getElementById("regName").value.trim(),
    email: document.getElementById("regEmail").value.trim(),
    password: document.getElementById("regPassword").value
  });
  if(ok){
    messageDiv.textContent = "âœ… Registered successfully, please login!";
    registerForm.reset();
    tabLogin.click();
  } else {
    messageDiv.textContent = data.error || "Registration failed";
  }
});

// Login
loginForm.addEventListener("submit", async e => {
  e.preventDefault();
  messageDiv.textContent = "";
  const {ok,data} = await postJson("/api/login", {
    email: document.getElementById("loginEmail").value.trim(),
    password: document.getElementById("loginPassword").value
  });
  if(ok){
    messageDiv.textContent = "âœ… Login successful, redirecting...";
    setTimeout(()=>window.location.href="/dashboard",1000);
  } else {
    messageDiv.textContent = data.error || "Login failed";
  }
});
</script>
</body>
</html>
